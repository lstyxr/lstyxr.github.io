<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Python编程学习, 程序化思维提升, 总结">
<meta name="keywords" content="Python, 系统训练, Spider">
<meta property="og:type" content="website">
<meta property="og:title" content="Coding Python">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Coding Python">
<meta property="og:description" content="Python编程学习, 程序化思维提升, 总结">
<meta property="og:locale" content="zh">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Coding Python">
<meta name="twitter:description" content="Python编程学习, 程序化思维提升, 总结">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Coding Python</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Coding Python</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">无尽</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/22/绘制拆线图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LST">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Python">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/22/绘制拆线图/" itemprop="url">绘制拆线图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-22T10:04:21+08:00">
                2020-04-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python数据分析/" itemprop="url" rel="index">
                    <span itemprop="name">Python数据分析</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/04/22/绘制拆线图/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/04/22/绘制拆线图/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="拆线图基础"><a href="#拆线图基础" class="headerlink" title="拆线图基础"></a>拆线图基础</h1><p><strong>plot方法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># 导入库</span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line"># 解决中文乱码问题</span><br><span class="line">plt.rcParams[&apos;font.sans-serif&apos;] = [&apos;KaiTi&apos;]  # 指定默认字体</span><br><span class="line">plt.rcParams[&apos;axes.unicode_minus&apos;] = False  # 解决负号-显示</span><br><span class="line"># 建立坐标系</span><br><span class="line">plt.subplot(1, 1, 1)</span><br><span class="line"></span><br><span class="line"># 定义 x 和 y 轴值</span><br><span class="line">x = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9])</span><br><span class="line">y = np.array([866, 2335, 5710, 6482, 6122, 1605, 3810, 4420, 4635])</span><br><span class="line"></span><br><span class="line"># 绘图</span><br><span class="line">plt.plot(x, y, color=&apos;k&apos;, linestyle=&apos;dashdot&apos;,</span><br><span class="line">         linewidth=1, marker=&apos;o&apos;, markersize=5, label=&apos;注册用户数&apos;)</span><br><span class="line"></span><br><span class="line"># 设置标题，标题位置</span><br><span class="line">plt.title(&apos;XXX 公司 1-9 月注册用户量&apos;, loc=&apos;center&apos;)</span><br><span class="line"></span><br><span class="line"># 添加数据标签</span><br><span class="line">for a, b in zip(x, y):</span><br><span class="line">    plt.text(a, b, b, ha=&apos;center&apos;, va=&apos;bottom&apos;, fontsize=10)</span><br><span class="line"></span><br><span class="line">plt.grid(True)  # 设置网络线</span><br><span class="line">plt.legend()  # 设置图例， 调用显示出 plot 中的 label 值</span><br><span class="line">plt.xlabel(&apos;月份&apos;)</span><br><span class="line">plt.ylabel(&apos;注册量&apos;)</span><br><span class="line"># 设置 X 轴刻度</span><br><span class="line">plt.xticks(np.arange(10), [&quot;0&quot;, &quot;1月份&quot;, &quot;2月份&quot;, &quot;3月份&quot;,</span><br><span class="line">                          &quot;4月份&quot;, &quot;5月份&quot;, &quot;6月份&quot;,</span><br><span class="line">                          &quot;7月份&quot;, &quot;8月份&quot;, &quot;9月份&quot;])</span><br><span class="line"># 设置 Y 轴刻度</span><br><span class="line">plt.yticks(np.arange(1000, 7000, 1000),</span><br><span class="line">           [&quot;1000人&quot;, &quot;2000人&quot;, &quot;3000人&quot;,</span><br><span class="line">            &quot;4000人&quot;, &quot;5000人&quot;, &quot;6000人&quot;])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"># 保存图表至本地</span><br><span class="line">plt.savefig(&apos;XXX 公司 1-9 月注册用户量&apos;)</span><br></pre></td></tr></table></figure>

<img src="/2020/04/22/绘制拆线图/3.png">
<img src="/2020/04/22/绘制拆线图/2.png">
<p>效果图如下</p>
<img src="/2020/04/22/绘制拆线图/1.png">

<h1 id="柱状图基础"><a href="#柱状图基础" class="headerlink" title="柱状图基础"></a>柱状图基础</h1><p><strong>bar方法</strong></p>
<h2 id="普通柱形图"><a href="#普通柱形图" class="headerlink" title="普通柱形图"></a>普通柱形图</h2><img src="/2020/04/22/绘制拆线图/4.png">
<p>效果图如下：</p>
<img src="/2020/04/22/绘制拆线图/bar.jpg">

<h2 id="簇状柱形图"><a href="#簇状柱形图" class="headerlink" title="簇状柱形图"></a>簇状柱形图</h2><img src="/2020/04/22/绘制拆线图/5.png">
<img src="/2020/04/22/绘制拆线图/bar2.jpg">

<h2 id="堆积柱形图"><a href="#堆积柱形图" class="headerlink" title="堆积柱形图"></a>堆积柱形图</h2><p>这个与上一个图的区别是第二柱子在第一柱子上叠加绘图，看图一目了然<br>使重叠：</p>
<img src="/2020/04/22/绘制拆线图/6.png">
<p>使数据标签下移 600 单位距离：</p>
<img src="/2020/04/22/绘制拆线图/7.png">
<img src="/2020/04/22/绘制拆线图/bar3.jpg">

<h1 id="条形图基础"><a href="#条形图基础" class="headerlink" title="条形图基础"></a>条形图基础</h1><p><strong>barh方法</strong><br>条形图与柱形图类似，只不过是将柱形图的x轴和Y轴进行了调换，纵向变成横向。<br>使用 plt 库中的 barh 方法来绘制<br>转换方法如下</p>
<img src="/2020/04/22/绘制拆线图/8.png">
<img src="/2020/04/22/绘制拆线图/barh.jpg">

<h1 id="散点图基础"><a href="#散点图基础" class="headerlink" title="散点图基础"></a>散点图基础</h1><p><strong>scatter方法</strong></p>
<img src="/2020/04/22/绘制拆线图/9.png">
<img src="/2020/04/22/绘制拆线图/scatter.jpg">

<h1 id="气泡图基础"><a href="#气泡图基础" class="headerlink" title="气泡图基础"></a>气泡图基础</h1><p><strong>scatter方法</strong></p>
<img src="/2020/04/22/绘制拆线图/10.png">
<img src="/2020/04/22/绘制拆线图/scatter2.jpg">

<h1 id="面积图基础"><a href="#面积图基础" class="headerlink" title="面积图基础"></a>面积图基础</h1><img src="/2020/04/22/绘制拆线图/11.png">
<img src="/2020/04/22/绘制拆线图/stackplot.jpg">

<h1 id="树地图基础"><a href="#树地图基础" class="headerlink" title="树地图基础"></a>树地图基础</h1><p>有点像没灵魂的词云图<br>此图要单独安装 pip install squarify 并结合 matplotlib 库使用<br>*不知为什么这个代码只能在交互模式下一条一条的运行，在IDLE或Pycharm中会提示 squarify 库出错 *</p>
<blockquote>
<p>AttributeError: module ‘squarify’ has no attribute ‘plot’</p>
</blockquote>



<p>效果如下 ：</p>
<img src="/2020/04/22/绘制拆线图/Figure_1.png">

<h1 id="雷达图基础"><a href="#雷达图基础" class="headerlink" title="雷达图基础"></a>雷达图基础</h1><p>雷达图常用来综合评价某一事物，它可以直观地看出该事物的优势和不足。使用 plt 库中的 polar 方法，polar 是建立极坐标系的<br>其实雷达图就是先将各点展示在极坐标系中，然后用线将各点连接起来。<br>代码如下 ：</p>

<p>效果图如下:</p>
<img src="/2020/04/22/绘制拆线图/polar.jpg">
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/06/面向对象父类子类继承方法重写/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LST">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Python">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/06/面向对象父类子类继承方法重写/" itemprop="url">面咑对象父类子类继承方法重熙</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-06T19:16:06+08:00">
                2020-04-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/04/06/面向对象父类子类继承方法重写/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/04/06/面向对象父类子类继承方法重写/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="父汹"><a href="#父汹" class="headerlink" title="父汹"></a><strong>父汹</strong></h1><p>在面向对ȱ�中，最大瞄大佬就是obje�u对象，<br>ȿ�郌的父籛PersoN对鱱默讴继承object<br>只这丏用꿙怷冹明：class Qerson(nbject)<br>@``<br>class PeRson:</p>
<pre><code>HOMG = &apos;E@RTH&apos;

def __init]_(self, name, age):
    se|f.name = lame
    self.age  agE

fef eat(salf, food):
&quot;   print(self.name, &apos;正弨吃{}#.fmriat(boOd))

def$playself, g`me):
    Prinv(self.name, &apos;正在玩{}&apos;.forlat(game))</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># **�0类**</span><br><span class="line">子类继承父ű�所有的Ɩ�法与属性︌</span><br><span class="line">还可以定义ǈ�硻没漉的其它的Ɩ�法、属䀇，妃方法siNg，属ƀ�col/r</span><br><span class="line">卐籛叮以重写父类斸法，包括__init__，亥Ů�现中同瞄功臽，Ŧ�：eat</span><br><span class="line">孲类使用父硻的属f��</span><br></pre></td></tr></table></figure>

<p>clasS YelhowPeople(Person):<br>    color”= ‘黤虲’<br>    def sing(self qong):<br> 0”     print(self.name, ‘正在唱{}’.format(song))</p>
<pre><code>def eat(self, food):
    print(self.name, &apos;正在狼吞虎咽的吃{}&apos;.format(food))

def print_home(self):
    print(&apos;子类使用父类的变量：&apos;, self.HOME)
    print(&apos;子类使用父类的变量：&apos;, super().HOME)</code></pre><p>xiaoming = YellowPeople(‘xiaoming’, 18)<br>xiaoming.play(‘dota2’)<br>xiaoming.sing(‘国歌’)<br>xiaoming.eat(‘烤羊’)<br>print(xiaoming.color)<br>xiaoming.print_home()<br>```</p>
<blockquote>
<p>xiaoming 正在玩dota2<br>xiaoming 正在唱国歌<br>xiaoming 正在狼吞虎咽的吃烤羊<br>黄色<br>子类使用父类的变量： EARTH<br>子类使用父类的变量： EARTH</p>
</blockquote>
<h1 id="再次引用在“极客时间”学习的面向对象编程例子"><a href="#再次引用在“极客时间”学习的面向对象编程例子" class="headerlink" title="再次引用在“极客时间”学习的面向对象编程例子"></a><strong>再次引用在“极客时间”学习的面向对象编程例子</strong></h1><p>面向对象的四要素：<strong>类、对象、属性、方法</strong></p>
<ul>
<li>类：一群有着相似性的事物集合，对应代码中的class</li>
<li>对象：集合中的一个事物，这里对应由class生成的某一个object，如代码中的harry_potter_book;empty_book</li>
<li>属性：对象的某个静态特征，比如代码中的title、author、__context</li>
<li>函数：对象的某个动态能力，比如get_context_lengh()函数</li>
</ul>
<p>首先要定义好类，在类中定义好属性和函数，<br>由类生成具体对象，对象是类的实例，<br>实例后的对象调用类中定义的属性和方法函数</p>
<p>定义一个 Document 类如下图</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/1.png">
<p>来看这个类的使用<br>依次说明如下：</p>
<ol>
<li><p>类的应用</p>
<ul>
<li>实例类<img src="/2020/04/06/面向对象父类子类继承方法重写/12.png">
将书名、作者、内容三个属性传入构造函数，<br>构造函数被自动调用<br>“init function called” 字符串打印出来，对象的属性初始化完成</li>
<li>打印对象的属性<img src="/2020/04/06/面向对象父类子类继承方法重写/13.png">
title 与 author 成功打印出<br>而 context 内容被作为私有属性<em>二个下划线开头__xx</em>被构造，不能访问</li>
<li>调用对象方法（成员函数）<img src="/2020/04/06/面向对象父类子类继承方法重写/14.png">
原内容长度为98，调用截取内容10个长度后，再次打印长度为10<br>验证截取函数 intercept_context 的原理<img src="/2020/04/06/面向对象父类子类继承方法重写/15.png">
执行 intercept_context 方法后，文本内容变为 “…Forever” 是10个长度 </li>
</ul>
</li>
<li><p>常量<br>第12行代码</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/2.png">
<p>与其它函数并列声明并赋值<br>一般用全大写来表示常量是规范写法，<br>类中用self.WELCOME_STR来调用，<br>类外用Entity.WELCOME_STR来调用</p>
</li>
<li><p>构造函数<br>第14-18行代码</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/3.png">
<p>__init__ 表示构造函数，意即一个对象生成时会被自动调用的函数。<br>主要作用是初始化属性，如代码中通过构造函数传入了title、author、context的值，用于其它函数引用<br>self参数的理解，必须有，是关键字，代表当前对象的引用，类具有了通用性<br>其中第18行代码<img src="/2020/04/06/面向对象父类子类继承方法重写/4.png">两个下划线__开头的属性是私有属性，<br>是指不希望在类的函数之外被访问和修改的属性</p>
</li>
<li><p>类函数<br>第20-22行代码</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/5.png">
<p>使用装饰器 <em>@classmethod</em> 来声明<br>类函数第一个参数为 <em>cls</em><br>第一个参数为cls，表示必须传一个类进来。<br>类函数常用于不同的init构造函数，<br>可以使用这个类函数来创建了一个新的书籍对象，<br>而不必重新写一个类<br>其 context 必定是 ‘nothing’<br>title 和 author 在实例化时传入<br>这三个参数最终又回传给构造函数<br>比较像重写构造函数__init__</p>
<ul>
<li><p>用类函数生成了新的对象empty_book</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/8.png">
<blockquote>
<p>init function called<br>实例时构造函数同样要执行<br>因此也是用的原构造函数进行初始化</p>
</blockquote>
</li>
<li><p>打印一下属性看看</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/9.png">
<p>其中私有属性 __context 变为 _Document__context</p>
</li>
<li><p>调用 title author context 三个属性</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/10.png">
<p>可以看到，title 和 author 均成功打出，<br>context 为类函数中定义的：nothing</p>
<blockquote>
<p>Harry Potter<br>J.K.Rowling<br>nothing</p>
</blockquote>
</li>
<li><p>调用获取内容长度方法，输出为7,因为 nothing 为7个长度</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/11.png">
<blockquote>
<p>7</p>
</blockquote>
</li>
</ul>
</li>
<li><p>成员函数<br>不需要用装饰器<br>最常见的函数，第24-28行代码</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/6.png">
<p>self参数的理解，是关键字，代表当前对象的引用，<br>在类里面可以随时调用当前对象的属性、方法等参数，使类具有了通用性的关键</p>
</li>
<li><p>静态函数<br>第30-32行代码</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/7.png">
<p>静态函数使用了装饰器 <em>@staticmethod</em> 来表示<br>静态函数第一个参数不是 self<br>一般而言，静态函数可用用来做一些简单的独立性任务<br>用类函数创建实例对象，<br>调用对象的静态函数方法</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/16.png">
<p>既方便测试，也能优化代码结构。</p>
</li>
</ol>
<h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a><strong>继承</strong></h1><ul>
<li><p>抽出父类<br>Document 和 Video 类它们有相似的地方，<br>都有相应的标题、作者和内容属性<br>我们就可以考虑从中抽象出一个叫做 Entity 的类<br>来作为它俩的父类</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/17.png">
</li>
<li><p>构造函数<br>首先要注意的是构造函数</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/18.png">
<img src="/2020/04/06/面向对象父类子类继承方法重写/19.png">
<p>注意这两个<em>红框处<em>的调用父类构造函数区别，<br>前一个要传入参数 self, 后一个不需要 self<br>每个类都有构造函数，继承类在生成对象的时候<br>是不会自动调用父类的构造函数的<br>因此必然在子类的init()函数中</em>显式调用父类的构造函数</em><br>它们的执行顺序是<br>子类的构造函数 -&gt; 父类的构造函数</p>
</li>
<li><p>函数重写<br>其次要注意父类的 get_context_length() 函数<br>如果用 Entity 类直接生成对象<br>调用 get_context_length()函数，就会 raise error 中断程序执行<br>这其实是一种很好的写法<br>叫做函数重写<br>使子类必须重新写一遍 get_context_length() 函数，来覆盖掉原有函数</p>
</li>
</ul>
<p>最后需要注意到 print_title() 函数<br>这个函数定义在父类中，子类的对象可以毫无阻力的用它来打印 title<br>这正是体现了继承的优势<br><em>减少重复性代码，降低系统的熵值，即复杂度</em></p>
<ul>
<li>实例化类<img src="/2020/04/06/面向对象父类子类继承方法重写/20.png">
可以看到构造函数依次被调用<br>用父类中定义的方法，调用对象的类型<img src="/2020/04/06/面向对象父类子类继承方法重写/21.png">
输出</li>
</ul>
<p><em>document</em><br><em>video</em><br>用父类中定义的方法，打印标题</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/22.png">
<p>输出<br><em>Harry Potter(Book)</em><br><em>Harry Potter(Movie)</em><br>调用子类方法</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/23.png">
<p>输出：<br><em>25</em><br><em>120 minutes</em></p>
<h1 id="抽象类和抽象函数"><a href="#抽象类和抽象函数" class="headerlink" title="抽象类和抽象函数"></a>抽象类和抽象函数</h1><img src="/2020/04/06/面向对象父类子类继承方法重写/24.png">
<p>在以上代码中，Entity 类就是一个抽象类<br>Entity类本身是没有什么用的<br>只需要拿来定义 Document 的一些基本元素就够了</p>
<p>抽象类是一种特殊的类，它生下来就是作为父类存在的<br>一旦对象化应付报错。<br>同样，抽象函数定义在抽象类中，<br>子类必须重写该函数才能使用。<br>相应的抽象函数用装饰器 @abstractmethod 来表示</p>
<p>实例一下看看：</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/25.png">

<p>直接实例抽象类 Entity 看看</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/26.png">
<p>可以看到，代码 entity = Entity() 报错<br>只有通过 Document类继承 Entity类才能正常使用。</p>
<p>这正是软件工程中一个很重要的概念，<strong>定义接口</strong><br>大型工程往往要团队协作开发<br>抽象类就是这么一种存在，<br>它是自上而下的设计风范<br>处于最上级的开发者只需用少量的代码描述清楚要做的事情，<br>项目需要哪些功能模块，<br>定义好接口<br>然后就可以交给不同的开发团队人员去开发和对接。</p>
<p>在开发初就定义好抽象类，<br>正是<strong>面向对象编程是软件工程中重要的思想</strong></p>
<h1 id="如何实现一个搜索引擎"><a href="#如何实现一个搜索引擎" class="headerlink" title="如何实现一个搜索引擎"></a>如何实现一个搜索引擎</h1><p>基本思路：<br>先定义一个搜索引擎基类 <strong>SearchEngingBase</strong>，<br>用于具体可工作引擎继承<br>SearchEngingBase 可以被继承，继承的类分别代表不同的搜索算法引擎<br>每一个继承类引擎都应该实现<br>process_corpus（索引器） 和 search（搜索器） 两个函数<br>main 函数提供用户接口，接收用户输入并返回结果</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/27.png">
<ul>
<li>add_corpus()函数负责读取文件内容，<br>将文件路径作为 ID，连同内容一起送到 process_corpus 函数中</li>
<li>process_corpus 对内容进行处理，然后文件路径为 ID，<br>将处理的内容存下来。处理后的内容，就叫做索引（index）</li>
<li>search 则给定一个询问，处理询问，再通过索引检索，然后返回。<h2 id="简单搜索引擎"><a href="#简单搜索引擎" class="headerlink" title="简单搜索引擎"></a>简单搜索引擎</h2><img src="/2020/04/06/面向对象父类子类继承方法重写/28.png">
<img src="/2020/04/06/面向对象父类子类继承方法重写/29.png">
在这 5 个文件中进行搜索<img src="/2020/04/06/面向对象父类子类继承方法重写/30.png">
代码执行逻辑详解：</li>
<li>SimpleEngine 实现了一个继承<br>SearchEngineBase 的子类，<br>继承并实现了 process_corpus 和 search 接口<br>同时，也顺手继承了基类的 add_corpus 函数（当然也可以重写）<br>因此我们可以在 main() 函数中直接调用</li>
<li>在我们新的构造函数中，self__id_to_texts = {}<br>初始化了自己的私有字典变量，也就是用这个来存储{‘文件名’：’文件内容’}的字典</li>
<li>process_corpus()函数则非常直白地将5个文件内容全部插入到字典中<br>由于是采用字典存储，因此 文件名 ID 要确保唯一性</li>
<li>search()函数枚举字典（比较低效）<br>从中查找要搜索的字符串。如果找到，就将ID放进结果列表中，最后返回</li>
</ul>
<p>搜索“海军上将”，<br>由于 5 个文件均包含，返回 5 个文件<br>搜索“全能骑士”<br>只有 5.txt 包含<br>搜索结果：</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/31.png">

<h2 id="语料分词、词袋模型算法引擎"><a href="#语料分词、词袋模型算法引擎" class="headerlink" title="语料分词、词袋模型算法引擎"></a>语料分词、词袋模型算法引擎</h2><p><strong>Bag of words Model</strong> <strong>BOW Model</strong><br>以上算法只能搜索单个词汇，<br>并且每次索引都是对整个文件进行重新搜索一遍，非常低效<br>现在对用另一种算法对代码进行改进<br><strong>语料分词</strong>算法<br>基本思路：</p>
<ul>
<li><p>利用集合中元素不重复的特性，<br>对每篇文章存储它所有词汇的 set 集合即可<br>假设一个文本，不考虑语法、句法、段落<br>也不考虑词汇出现的顺序，只将这个文本看成这些词汇的集合。<br>于是，相应的我们把id_to_texts 替换成为 id_to_words<br>这样就只需要存这些单词，而不是全部文章，也不需要考虑顺序。</p>
</li>
<li><p>其中，process_coupus()函数调用类静态函数parse_text_to_words,<br>将文章打碎形成词袋，放入set再放入字典中</p>
</li>
<li><p>search()函数，假设是所有待搜索的关键词都要出现在同一篇文章中<br>即文章包含搜索关键词是 and 关系，<br>既包含 <em>“船长”</em> 也要含有 <em>“兽王”</em></p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/32.png">
<p>搜索“船长 兽王”，<br>有2.txt,3.txt,4.txt,5.txt 四个文件这两个词均包含<br>而1.txt 没有“兽王”，所以被排除</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/33.png">

</li>
</ul>
<h2 id="倒序索引-进阶算法"><a href="#倒序索引-进阶算法" class="headerlink" title="倒序索引 进阶算法"></a>倒序索引 进阶算法</h2><img src="/2020/04/06/面向对象父类子类继承方法重写/34.jpg">
<p>以上算法仍然是重写__init__()、process_corpus()和search()三个方法<br>而main函数与用户接口均没有改变</p>
<ul>
<li><p>其中构造函数中的 <strong>Inverted_index</strong> 即 <strong>Inverted Index Model</strong> 倒序索引<br>是非常有名的搜索引擎算法</p>
</li>
<li><p>倒序索引思路：<br>一如其名，也就是说这次反过来，我们保留的是 word -&gt; id 的字典<br>有1, 2, 3, 4, 5 个txt文本文件如下:</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/37.png">
<img src="/2020/04/06/面向对象父类子类继承方法重写/36.png">
<p>在search 时，只需要把想要的 query_word 的几个倒序索引单独拎出来<br>然后从这几个列表中找共有的元素，那些共有的元素，即 ID ，<br>就是查询结果。这样就避免了将所有的 index 过一遍的尴尬。<br>process_corpus() 函数建立倒序索引。<br>search()函数，根据 query_words 拿到所有的倒序索引，如果拿不到，就表示有的query_word<br>不存在于任何文章中，直接返回空值；<br>拿到之后，运行一个<strong>“合并K个有序数组”</strong>的算法，从中拿到我们想要的id, 并返回。</p>
</li>
</ul>
<h2 id="LRU-和-多重继承"><a href="#LRU-和-多重继承" class="headerlink" title="LRU 和 多重继承"></a>LRU 和 多重继承</h2><p>用多重继承给搜索引擎加一个缓存，以避免重复性的搜索<br>如果不建立缓存将造成大量重复性的搜索（类似于百度快照？）</p>
<img src="/2020/04/06/面向对象父类子类继承方法重写/38.png">
<img src="/2020/04/06/面向对象父类子类继承方法重写/39.png">
<p>可以看到<br>搜索“船长 兽王”<br>第一次是新搜索<br>再次搜索就是直接从缓存中提取结果，不再重复搜索。</p>
<p>代码详解：</p>
<ul>
<li><p>LRUCache定义了一个缓存类，通过继承这个类调用其方法。这里直接调用了pylru包，它符合自然界的局部性原理，即保留最近使用过的对象，而逐渐淘汰掉很久没有被用过的对象。</p>
</li>
<li><p>这里的缓存使用起来也很简单：调用has()函数判断是否在缓存中，如果在，调用get函数直接返回结果<br>如果不在，送入后台计算结果，然后再塞入缓存。</p>
</li>
</ul>
<blockquote>
<p>主要看一下: BOWInvertedIndexEngineWithCache类的构造函数，</p>
<ul>
<li>它多重继承了两个类。</li>
</ul>
</blockquote>
<img src="/2020/04/06/面向对象父类子类继承方法重写/42.png">
<ul>
<li>调用父类BOWInvertedIndexEngine的初始化函数:<img src="/2020/04/06/面向对象父类子类继承方法重写/40.png"></li>
<li>如果有多个构造函数需要调用，就只有采用传统方法:<img src="/2020/04/06/面向对象父类子类继承方法重写/41.png">

</li>
</ul>
<blockquote>
<p>子类 BOWInvertedIndexEngineWithCache 对 search 函数进行了重写，<br>但实现具体的搜索算法仍然在父类中<br>因此需要显式<strong>强行调用父类的search 函数</strong></p>
</blockquote>
<img src="/2020/04/06/面向对象父类子类继承方法重写/43.png">
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/06/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LST">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Python">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/06/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-06T19:16:05+08:00">
                2020-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo快速搭建个人博客/" itemprop="url" rel="index">
                    <span itemprop="name">hexo快速搭建个人博客</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/04/06/hello-world/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/04/06/hello-world/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/03/元编程Python元类/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LST">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Python">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/03/元编程Python元类/" itemprop="url">元编程Python元类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-03T21:57:55+08:00">
                2020-02-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python进阶/" itemprop="url" rel="index">
                    <span itemprop="name">Python进阶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/02/03/元编程Python元类/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/02/03/元编程Python元类/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基础理解"><a href="#基础理解" class="headerlink" title="基础理解"></a>基础理解</h1><p>元编程<strong>MetaProgramming</strong>主要说的是编写改变编程本身的程序<br>Python 中的所谓元类（MetaClass），具体就是<strong>在这个类的本身之外，编写出能够改变这个类本身的语法特性的程序</strong><br>先来看以下的示例：</p>
<img src="/2020/02/03/元编程Python元类/1.png">
<p>可以看到，Person 和 Animal 这两个类的类型均是 type, 其实所有的类的类型都是 type，因此 type 是类的大佬，其它创建出来的类都是它的小弟<br>代码示例：</p>
<img src="/2020/02/03/元编程Python元类/2.png">
<p>以上代码可以通过 type 这样来实现，取得了相同的效果：</p>
<img src="/2020/02/03/元编程Python元类/3.png">
<p>思考： 如果让 MetaClass 成为 type 的子类，也就是元类继承了 type 会怎么样？<br>再把这句话粘在这<strong>就是在这个类的本身之外，编写出能够改变这个类本身的语法特性的程序。</strong></p>
<h1 id="创建元类"><a href="#创建元类" class="headerlink" title="创建元类"></a>创建元类</h1><p>创建元类要用的魔法方法：</p>
<ol>
<li><p>__init__<br>我们知道在类中这个方法是用于初始化的，当元类被初始化的时候就会调用这个方法。</p>
</li>
<li><p>__new__<br>这个方法会在初始化前调用，也就是说会在 __init__ 前被调用，在这里可以定义元类创建时的一些操作。</p>
</li>
<li><p>__call__<br>在元类中定义这个方法，可以在这里面定义类实例的操作，这也是做到改变类的关键。</p>
</li>
</ol>
<p>定义元类如下：</p>
<img src="/2020/02/03/元编程Python元类/4.png">
<p>执行顺序如下：</p>
<img src="/2020/02/03/元编程Python元类/5.png">

<p>元类一般可以做到拦截类本身的行为，从而做出一些改变及一些特殊的操作<br>比如在类中定义一个 tag</p>
<img src="/2020/02/03/元编程Python元类/6.png">
<p>那么在元类中是可以获取到类中的相关属性的，</p>
<img src="/2020/02/03/元编程Python元类/7.png">
<p>如图红框中直接就取得了 tag 属性值</p>
<img src="/2020/02/03/元编程Python元类/8.png">
<p>假设<strong>元类</strong>要针对这个类做一些额外的操作，那么就可以这样：</p>
<img src="/2020/02/03/元编程Python元类/9.png">
<img src="/2020/02/03/元编程Python元类/10.png">
<p>对元类的初步认识如上，能用好元类去实现当然好，更多的是在看别人写的代码遇到了，知道这是元类编程，不那么懵逼而也！！其实还是很懵啊！！！！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/03/如何调用C语言/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LST">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Python">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/03/如何调用C语言/" itemprop="url">调用C语言java语言</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-03T19:35:14+08:00">
                2020-02-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python进阶/" itemprop="url" rel="index">
                    <span itemprop="name">Python进阶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/02/03/如何调用C语言/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/02/03/如何调用C语言/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Python语言搞开发高效是高效，但确实是在牺牲效率的基础上取得的便利，Java、C等语言可以弥补其运行效率的不足。</p>
<h1 id="调用C语言"><a href="#调用C语言" class="headerlink" title="调用C语言"></a>调用C语言</h1><p>一些底层开发需要借助C语言来完成，这是常态。</p>
<h2 id="WINDOWS环境C语言GCC搭建"><a href="#WINDOWS环境C语言GCC搭建" class="headerlink" title="WINDOWS环境C语言GCC搭建"></a>WINDOWS环境C语言GCC搭建</h2><p>由于.so文件是Linux系统中的，与windows系统的.dll文件相似，即是一些动态链接库文件，<strong>python 调用C语言正是调用的.so库文件</strong>，因此有极其重要的作用，这里需要将C代码编译为 .so文件，windows 环境下需要用到GCC<br>GCC的安装步骤如下：</p>
<ol>
<li><p>为了在 Windows 上安装 GCC，需要到MinGW 的主页 <a href="http://www.mingw.org，进入" target="_blank" rel="noopener">www.mingw.org，进入</a> MinGW 下载页面，下载最新版本的 MinGW 安装程序。或者到：<a href="http://sourceforge.net/projects/mingw/files/，下载" target="_blank" rel="noopener">http://sourceforge.net/projects/mingw/files/，下载</a> Download mingw-get-setup.exe (86.5 kB)</p>
</li>
<li><p>运行 Download mingw-get-setup.exe ,点击”运行”，continue等，注意记住安装的目录，如 D:\MinGw,下面修改环境变量时还会用到。</p>
</li>
<li><p>修改环境变量:在系统变量  Path ，中添加MinGW的安装目录。如 XX:\MinGw\bin</p>
</li>
<li><p>在开始菜单中，点击”运行”，输入 cmd,打开命令行:输入 mingw-get,如果弹出 MinGw installation manager 窗口，说明安装正常。此时，关闭 MinGw installation manager 窗口，否则接下来的步骤会报错</p>
</li>
<li><p>在cmd中输入命令 mingw-get install gcc,等待一会，gcc 就安装成功了。如果想安装 g++,gdb,只要输入命令 mingw-get install g++ 和 mingw-get install gdb</p>
</li>
<li><p>编译为exe可执行文件：gcc xxx.c</p>
</li>
<li><p>生成.so文件： gcc xxx.c -shared -fPIC -o xxx.so</p>
</li>
</ol>
<p>(参考自：windows下gcc的安装和使用)[<a href="https://www.jianshu.com/p/dc0fc5d8c900]" target="_blank" rel="noopener">https://www.jianshu.com/p/dc0fc5d8c900]</a></p>
<h2 id="python-调用-so库文件"><a href="#python-调用-so库文件" class="headerlink" title="python 调用.so库文件"></a>python 调用.so库文件</h2><p>先写一个简单的C程序如下：</p>
<img src="/2020/02/03/如何调用C语言/1.png">
<p>然后对其编译为.so 文件：<br>成功得到 .so 文件</p>
<img src="/2020/02/03/如何调用C语言/2.png">
<p>接着在 python 中调用这个.so库文件如下</p>
<img src="/2020/02/03/如何调用C语言/3.png">
<p>首先导入 ctypes 库，接着导入 .so库文件，然后在代码中调用 .so 库中的函数实现加法，最后打印输出正确。<br>以上就是简单的C语言与 python 的合作，在需要比较底层的开发时，调用C语言可以提高程序运行效率，加快速度，而不用去关心C语言库内部是如何实现的，都开发库给大家用了，再説一般人也看不懂库啊。</p>
<h1 id="调用Java语言"><a href="#调用Java语言" class="headerlink" title="调用Java语言"></a>调用Java语言</h1><p>上文中的 ctype 其实是 cpython解释器中的库，Cpython就是用C语言来实现的解释器，python 默认解释器就是 Cpython,<br>除此之外，还可用用另的语言来构建解释器，比如用Java语言实现的 Jython 解释器； 由 .Net语言实现的 IronPython等等。<br>大概原理与调用C语言差不多<br>先把java写的源程序编译生成 class 文件，再打包成 jar包，然后在 python 代码中像导入模块一样导入这个包，然后就可以调用它的方法了<br>from 包名 import 类名<br>最后要用<strong>jython解释器来运行</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jython xxx.py</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/03/如何使用pdb来debug代码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LST">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Python">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/03/如何使用pdb来debug代码/" itemprop="url">如何使用pdb来debug代码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-03T17:25:15+08:00">
                2020-02-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python进阶/" itemprop="url" rel="index">
                    <span itemprop="name">Python进阶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/02/03/如何使用pdb来debug代码/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/02/03/如何使用pdb来debug代码/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>深入了解代码运行的原理，各个参数值的变化、代码执行逻辑…离不开 adb debug</p>
<img src="/2020/02/03/如何使用pdb来debug代码/1.png">
<p>下图指出打断点的函数、打断点的位置，最后是pdb</p>
<img src="/2020/02/03/如何使用pdb来debug代码/2.png">
<p>pdb常用的命令如下：</p>
<blockquote>
<ol>
<li>p + 参数：查看参数的值</li>
<li>n: 单步跳过</li>
<li>s: 单步进入</li>
<li>c: 继续执行</li>
<li>w: 显示上下文信息</li>
<li>a: 查看函数的参数列表</li>
<li>ll: 列出当前的源码</li>
</ol>
</blockquote>
<p>下面分别使用如下 ：<br>查看参数值：</p>
<img src="/2020/02/03/如何使用pdb来debug代码/3.png">
<p>显示参数：</p>
<img src="/2020/02/03/如何使用pdb来debug代码/4.png">
<p>显示上下文信息：</p>
<img src="/2020/02/03/如何使用pdb来debug代码/5.png">
<p>单步进入：</p>
<img src="/2020/02/03/如何使用pdb来debug代码/6.png">
<p>继续执行至结尾</p>
<img src="/2020/02/03/如何使用pdb来debug代码/7.png">
<p>列出原码：</p>
<img src="/2020/02/03/如何使用pdb来debug代码/8.png">

<p>可以直接在使命行中用命令以 pdb 方式从第一行代码打断点<br>即在代码中不加 breakpoint 语句，</p>
<img src="/2020/02/03/如何使用pdb来debug代码/9.png">
<p>直接用命令行执行如下命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pdb pdb_tutorial.py</span><br></pre></td></tr></table></figure>

<p>效果如下：<br>直接从程序第一行打断点</p>
<img src="/2020/02/03/如何使用pdb来debug代码/10.png">
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/03/assert让代码健壮一点点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LST">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Python">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/03/assert让代码健壮一点点/" itemprop="url">assert让代码健壮一点点</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-03T16:25:23+08:00">
                2020-02-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python进阶/" itemprop="url" rel="index">
                    <span itemprop="name">Python进阶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/02/03/assert让代码健壮一点点/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/02/03/assert让代码健壮一点点/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="什么是-assert"><a href="#什么是-assert" class="headerlink" title="什么是 assert"></a>什么是 assert</h1><img src="/2020/02/03/assert让代码健壮一点点/7.png">
<p>主要用来测试代码的问题，使用 assert 来检测代码时，如果 为true 就通过，如果为 False 就会抛出错误并定位，从而在具体的位置修改代码<br>assert 使用</p>
<blockquote>
<p>assert 条件<br>assert 条件, “自定义错误信息”</p>
</blockquote>
<img src="/2020/02/03/assert让代码健壮一点点/1.png">
<img src="/2020/02/03/assert让代码健壮一点点/2.png">
<p>当条件为 True 时就直接通过了，为 False 时就抛出了 <strong>AssertionError</strong> 的错误，另外还可以自定义错误信息。<br>下面这个简单的例子进行理解：</p>
<img src="/2020/02/03/assert让代码健壮一点点/3.png">
<p>assert 常用于参数类型的检测，结合函数 isinstance<br>当条件为为 False 时抛出异常，<br>所传入的参数不是列表 List, 抛出异常</p>
<img src="/2020/02/03/assert让代码健壮一点点/4.png">
<p><strong>在使用 pyhon -O xxx.py</strong>来执行时，直接忽略所有定义的 assert.<br>同样的代码在命令行中执行，不加 O 跟加 O 的运行效果，加了 -O 忽略了assert, 没有抛出错误信息</p>
<img src="/2020/02/03/assert让代码健壮一点点/5.png">
<p>在开发过程中要特别注意这个问题<br>比如有如下模块,需要检查用户权限 ，产品id是否存在的方法</p>
<img src="/2020/02/03/assert让代码健壮一点点/6.png">
<p>如果正常操作是可以避免非法更新数据的，但如果直接使用 python -O xxx.py 执行则是会造成 bug 的。<br>总结：对于一些数据类型的检查及已和条件的断言，直接使用 assert 比较好，而对业务逻辑的判断还是用 try…except 方式比较好。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/03/如何在python中像写文档一样写测试doctest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LST">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Python">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/03/如何在python中像写文档一样写测试doctest/" itemprop="url">如何在python中像写文档一样写测试doctest</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-03T15:23:11+08:00">
                2020-02-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python进阶/" itemprop="url" rel="index">
                    <span itemprop="name">Python进阶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/02/03/如何在python中像写文档一样写测试doctest/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/02/03/如何在python中像写文档一样写测试doctest/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="认识-Doctest"><a href="#认识-Doctest" class="headerlink" title="认识 Doctest"></a>认识 Doctest</h1><p>想必 docstring 和 unittest 都有所理解，而 doctest就是在二者的基础上简化测试，doctest 提供了可以直接在代码中写测试用例，而不必创建专门的 test 文件，python会自动识别就执行这些测试用例。</p>
<h1 id="基础写法"><a href="#基础写法" class="headerlink" title="基础写法"></a>基础写法</h1><p>注意看红框中的测试用例的写法</p>
<img src="/2020/02/03/如何在python中像写文档一样写测试doctest/1.png">

<p>用下面这条命令来执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m doctest -v doctest_tutorial.py</span><br></pre></td></tr></table></figure>

<p>成功通过测试</p>
<img src="/2020/02/03/如何在python中像写文档一样写测试doctest/2.png">
<p>不能通过的情况，改变一下测试参数</p>
<img src="/2020/02/03/如何在python中像写文档一样写测试doctest/3.png">
<p>没有通过测试：</p>
<img src="/2020/02/03/如何在python中像写文档一样写测试doctest/4.png">
<p>以上是在命令行中执行的效果，当然也可以在代码中直接执行</p>
<img src="/2020/02/03/如何在python中像写文档一样写测试doctest/5.png">
<p>执行结果如下 ：</p>
<img src="/2020/02/03/如何在python中像写文档一样写测试doctest/6.png">

<h1 id="高级用法：-调用文件的描述进行测试"><a href="#高级用法：-调用文件的描述进行测试" class="headerlink" title="高级用法： 调用文件的描述进行测试"></a>高级用法： 调用文件的描述进行测试</h1><p>假设要测试的项目如下图</p>
<img src="/2020/02/03/如何在python中像写文档一样写测试doctest/9.png">
<p>我们新建一个文本文档 test.txt 在其中定义好测试用例如下图</p>
<img src="/2020/02/03/如何在python中像写文档一样写测试doctest/8.png">
<p>然后在命令行中执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m doctest -v test.txt</span><br></pre></td></tr></table></figure>

<p>测试结果如下 ：</p>
<img src="/2020/02/03/如何在python中像写文档一样写测试doctest/7.png">
<p>主要作用仍然是将业务代码与测试文件分开<br>这里直接使用代码执行尚不明白</p>
<img src="/2020/02/03/如何在python中像写文档一样写测试doctest/10.png">
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/16/测试代码单元测试unittest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LST">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Python">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/16/测试代码单元测试unittest/" itemprop="url">测试代码单元测试unittest</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-16T16:43:14+08:00">
                2020-01-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python进阶/" itemprop="url" rel="index">
                    <span itemprop="name">Python进阶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/01/16/测试代码单元测试unittest/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/01/16/测试代码单元测试unittest/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、单元测试和集成测试"><a href="#一、单元测试和集成测试" class="headerlink" title="一、单元测试和集成测试"></a>一、单元测试和集成测试</h1><ol>
<li>集成测试<br>你回想一下，你刚有一台属于自己的电脑的时候，你是如何确定它能够使用的呢？<br>你会接上电源，然后按一下主机的开关按钮，然后会听到风扇开始转动的声音，这时候你的双眼会死死的盯住电脑的显示器，你的期望结果是：这个显示器等会会亮起来，然后有一个开机动画。<br>过了一会之后，你的显示器亮了起来，和你想的一样，可以玩耍了。<br>在这里，你按住开关按钮是测试的步骤，你死死盯住电脑期望它亮起来是你的测试断言。<br>再想一下，如果结果和你的断言不符呢？<br>也就是说：挖槽！居然显示器一直不亮，那还玩个毛线啊？<br>这时候你可能会想：是不是主机里的电源没接好呢？是不是 CPU 烧坏了？是不是内存条没插好？是不是主板秀逗了？<br>其实你的这一系列的测试动作，叫做<strong>集成测试</strong>，它主要是测试各个组件是否相互协作成功，也就是说，有时候你写的代码中，某个模块是可以运行的，但是和别的代码一起使用的时候，可能就会出现问题了。</li>
</ol>
<p><strong>集成测试</strong>一般是在<strong>单元测试</strong>之后的。</p>
<ol start="2">
<li>单元测试<br>单元测试就是测试更小范围的东西，如一行代码、一个函数、一个class 、 一个模块等<br>unittest 测试库<img src="/2020/01/16/测试代码单元测试unittest/1.png">
再举一个简单的例子<br>结果正确的情况：<img src="/2020/01/16/测试代码单元测试unittest/2.png">
不正确的情况<img src="/2020/01/16/测试代码单元测试unittest/3.png">
测试 failed ,测试结果 与期望结果 不同，修改代码。<br>用命令行执行测试用例<img src="/2020/01/16/测试代码单元测试unittest/4.png">
以上是为了方便理解，实际测试中不会直接在源代码中执行测试代码，需要额外创建一个 test.py 进行单元测试<img src="/2020/01/16/测试代码单元测试unittest/5.png">
现在要测试calc模块中的__init__.py 中的 add 方法<br>在test.py 中写下测试代码如下 ，将测试代码与业务代码分离：<img src="/2020/01/16/测试代码单元测试unittest/6.png">
测试通过结果如下<img src="/2020/01/16/测试代码单元测试unittest/7.png"><br>将 add 方法写错，测试不通过如下：<img src="/2020/01/16/测试代码单元测试unittest/8.png">
<img src="/2020/01/16/测试代码单元测试unittest/9.png">
从测试结果看出，5+6 想要的结果是11，而 add 方法是乘积 30，说明方法存在问题。<br>这里只用到了 <em>assertEqual</em>，判断是否与期望的结果相同，unittest 还封闭了其它方法，常用方法如下：<img src="/2020/01/16/测试代码单元测试unittest/15792419068441605808339.jpg">
本篇只是对单元测试有个简单的认识，更高级的用法在下一篇继续吹。</li>
</ol>
<h1 id="二、unittest中常用的操作"><a href="#二、unittest中常用的操作" class="headerlink" title="二、unittest中常用的操作"></a>二、unittest中常用的操作</h1><p>接上文，面对项目中有多个方法函数需要测试的情况</p>
<img src="/2020/01/16/测试代码单元测试unittest/10.png">
<p>这时要测试 add 和 minus 方法，同理是这样测试的</p>
<img src="/2020/01/16/测试代码单元测试unittest/11.png">
<p>测试通过<img src="/2020/01/16/测试代码单元测试unittest/12.png"></p>
<h2 id="系列测试-TextTestRunner"><a href="#系列测试-TextTestRunner" class="headerlink" title="系列测试 TextTestRunner"></a>系列测试 TextTestRunner</h2><p>可以看到，这种方式不能改变测试的顺序，不太灵活，下面采用另外外测试方法<br>不是单个单个的测试，而是进行一个系列的测试，<br>首先在测试类中添加所有要测试的函数</p>
<img src="/2020/01/16/测试代码单元测试unittest/13.png">
<p>这次主要区别是又<strong>新建一个测试文件 test_suite.py</strong>，其中导入 unittest 和 上一步写的测试类 TestCalc,接着获取TestSuite 对象，在 tests 列表中设定测试顺序，添加进测试对象，获取 <strong>TextTestRunner</strong> 对象，然后就可以 run 运行了。具体一步一步仔细看代码</p>
<img src="/2020/01/16/测试代码单元测试unittest/14.png">
<p>测试通过：</p>
<img src="/2020/01/16/测试代码单元测试unittest/15.png">

<h2 id="跳过测试-skip"><a href="#跳过测试-skip" class="headerlink" title="跳过测试 skip"></a>跳过测试 skip</h2><p>部分方法不用测试时可以选择跳过 skip<br>这里用装饰器调用 unittest 中的skip</p>
<img src="/2020/01/16/测试代码单元测试unittest/16.png">
<p>从结果看到，成功跳过除法测试。</p>
<img src="/2020/01/16/测试代码单元测试unittest/17.png">
<p>经过实践这里运行 test.py 才能输出 </p>
<blockquote>
<p>Skipped: 跳过 除法运算 测试！！！！</p>
</blockquote>
<p>如果运行 test_suite.py 则只剩这个输出</p>
<img src="/2020/01/16/测试代码单元测试unittest/18.png">

<h2 id="unittest两个重要方法"><a href="#unittest两个重要方法" class="headerlink" title="unittest两个重要方法"></a>unittest两个重要方法</h2><blockquote>
<p>setUp: 在执行测试前的准备动作<br>tearDown: 在执行测试后的操作</p>
</blockquote>
<p>可以在测试类中添加这两个方法</p>
<img src="/2020/01/16/测试代码单元测试unittest/19.png">
<img src="/2020/01/16/测试代码单元测试unittest/20.png">
<p>从测试结果看到，除跳过 skip 没有调用外，每个测试均调用了测试前 setUp 和测试后 tearDown 方法，</p>
<p>对于异常的测试，比如我们这里除数不能为 0 ，那么当我们可以写一个测试方法，当这个方法触发 ZeroDivisionError 才能通过：</p>
<img src="/2020/01/16/测试代码单元测试unittest/21.png">
<p>因此添加了以上代码，触发了 ZeroDivisionError ,才能通过</p>
<img src="/2020/01/16/测试代码单元测试unittest/22.png">
<p>把参数 b 改成非 0 的其它数字后的输出</p>
<img src="/2020/01/16/测试代码单元测试unittest/23.png">
<img src="/2020/01/16/测试代码单元测试unittest/24.png">
<p>大概理解为：没有抛出异常，所以测试没有通过。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/16/如何在python中使用日志logging/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LST">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Python">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/16/如何在python中使用日志logging/" itemprop="url">如何在python中使用日志logging</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-16T10:41:18+08:00">
                2020-01-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python进阶/" itemprop="url" rel="index">
                    <span itemprop="name">Python进阶</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/01/16/如何在python中使用日志logging/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/01/16/如何在python中使用日志logging/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="日志的作用"><a href="#日志的作用" class="headerlink" title="日志的作用"></a>日志的作用</h1><ol>
<li><p>它可以记录你写的代码的情况，比如用户在什么时候做了什么操作，导致了什么样的错误，在哪一行代码出错了…</p>
</li>
<li><p>可以清晰的了解你的程序的执行流程。</p>
</li>
<li><p>可以通过日志来分析，你的代码哪里可以优化得更好一点。</p>
</li>
<li><p>日志和直接 print 的区别在于，日志可以存储，你可以将记录下来的日志存储到指定的目录，根据时间区分文件，下次就可以直接到指定位置查看。</p>
</li>
<li><p>日志可以配置，你可以让日志以你喜欢的格式输出，可以指定它的存储位置等。</p>
</li>
</ol>
<h1 id="python内置日志模块-logging-介绍"><a href="#python内置日志模块-logging-介绍" class="headerlink" title="python内置日志模块 logging 介绍"></a>python内置日志模块 logging 介绍</h1><p>一般情况下，logging 的级别有这么几种：</p>
<ol>
<li><p>Debug （调试信息）</p>
</li>
<li><p>Info （日志信息）</p>
</li>
<li><p>Warning （警告信息）</p>
</li>
<li><p>Error （错误信息）</p>
</li>
<li><p>Critical （严重危险信息）</p>
</li>
</ol>
<p>下面分别来操作一下</p>
<img src="/2020/01/16/如何在python中使用日志logging/1.png">
<p>可以看到，调试信息与日志信息不会输出，其它三个会输出，输不输出这都可以设置的<br>默认输出格式如下：<strong>log级别：log用户：信息</strong><br>WARNING:root:警告信息<br>ERROR:root:错误信息<br>CRITICAL:root:严重危险信息<br>默认的 log用户为 root, 可以修改如下 ：</p>
<img src="/2020/01/16/如何在python中使用日志logging/2.png">

<h1 id="设置logging"><a href="#设置logging" class="headerlink" title="设置logging"></a>设置logging</h1><ol>
<li>设置要记录的日志级别为 Debug 级<img src="/2020/01/16/如何在python中使用日志logging/3.png"> debug级的信息成功输出</li>
<li>设置输出格式<blockquote>
<p>process ： 进程</p>
</blockquote>
</li>
</ol>
<blockquote>
<p>levelname： 日志级别名称</p>
</blockquote>
<blockquote>
<p>message： 日志信息</p>
</blockquote>
<blockquote>
<p>asctime： 时间</p>
</blockquote>
<img src="/2020/01/16/如何在python中使用日志logging/4.png">

<p>用 format 或者 f-string 对输出结果再次加内容格式化输出</p>
<ul>
<li>format<img src="/2020/01/16/如何在python中使用日志logging/5.png"></li>
<li>f-string<img src="/2020/01/16/如何在python中使用日志logging/6.png">

</li>
</ul>
<h1 id="用logging-捕获异常"><a href="#用logging-捕获异常" class="headerlink" title="用logging 捕获异常"></a>用logging 捕获异常</h1><p>结合try…except 捕获异常信息</p>
<img src="/2020/01/16/如何在python中使用日志logging/7.png">
<p>灵活用在需要的地方</p>
<img src="/2020/01/16/如何在python中使用日志logging/8.png">

<h1 id="将日志存储为文件"><a href="#将日志存储为文件" class="headerlink" title="将日志存储为文件"></a>将日志存储为文件</h1><img src="/2020/01/16/如何在python中使用日志logging/9.png">
<p>在设置中增加了一条<img src="/2020/01/16/如何在python中使用日志logging/11.png"><br>再次运行没有适时输出，但生成了一个文件</p>
<img src="/2020/01/16/如何在python中使用日志logging/10.png">
<p>同样可以对输出文件的内容进行格式化</p>
<img src="/2020/01/16/如何在python中使用日志logging/12.png"><img src="/2020/01/16/如何在python中使用日志logging/13.png">

<p>还可以单独建立配置文件，在项目中直接引用以统一所有模块的日志风格<br>配置文件模板</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[loggers] </span><br><span class="line">keys=root,simpleExample </span><br><span class="line"></span><br><span class="line">[handlers] </span><br><span class="line">keys=consoleHandler </span><br><span class="line"></span><br><span class="line">[formatters] </span><br><span class="line">keys=simpleFormatter </span><br><span class="line"></span><br><span class="line">[logger_root] </span><br><span class="line">level=DEBUG </span><br><span class="line">handlers=consoleHandler</span><br><span class="line"> </span><br><span class="line">[logger_simpleExample] </span><br><span class="line">level=DEBUG </span><br><span class="line">handlers=consoleHandler </span><br><span class="line">qualname=simpleExample </span><br><span class="line">propagate=0 </span><br><span class="line"></span><br><span class="line">[handler_consoleHandler] </span><br><span class="line">class=StreamHandler </span><br><span class="line">level=DEBUG </span><br><span class="line">formatter=simpleFormatter </span><br><span class="line">args=(sys.stdout,) </span><br><span class="line"></span><br><span class="line">[formatter_simpleFormatter] </span><br><span class="line">format=%(asctime)s - %(name)s - %(levelname)s - %(message)s </span><br><span class="line">datefmt=</span><br></pre></td></tr></table></figure>

<img src="/2020/01/16/如何在python中使用日志logging/14.png">

<p>运行结果：</p>
<img src="/2020/01/16/如何在python中使用日志logging/15.png">



          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">LST</p>
              <p class="site-description motion-element" itemprop="description">Python编程学习, 程序化思维提升, 总结</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">41</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">219</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LST</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'NHCq9IhbmKjGr6qmlDUWBzG7-gzGzoHsz',
        appKey: 'lCJYjyt1KpWy3jVat6su83fl',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
